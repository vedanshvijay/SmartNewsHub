<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PlanetPulse - Your Intelligent News Aggregation Platform{% endblock %}</title>
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="{% block meta_title %}PlanetPulse - Latest News, Breaking Updates & Personalized News Feed{% endblock %}">
    <meta name="description" content="{% block meta_description %}Get real-time news updates, breaking stories, and personalized news feed from around the world. Stay informed with PlanetPulse's intelligent news aggregation platform.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}news, breaking news, latest news, world news, indian news, current events, news updates, personalized news, news aggregation, real-time news, business news, technology news, sports news, entertainment news, health news, science news, education news, politics news{% endblock %}">
    <meta name="author" content="Vedansh Vijayvargia">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:title" content="{% block og_title %}PlanetPulse - Your Intelligent News Aggregation Platform{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Stay informed with the latest news, breaking updates, and personalized news feed from around the world. PlanetPulse brings you real-time news aggregation with AI-powered personalization.{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ url_for('static', filename='img/logo.png', _external=True) }}{% endblock %}">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ request.url }}">
    <meta property="twitter:title" content="{% block twitter_title %}PlanetPulse - Your Intelligent News Aggregation Platform{% endblock %}">
    <meta property="twitter:description" content="{% block twitter_description %}Stay informed with the latest news, breaking updates, and personalized news feed from around the world.{% endblock %}">
    <meta property="twitter:image" content="{% block twitter_image %}{{ url_for('static', filename='img/logo.png', _external=True) }}{% endblock %}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ request.url }}">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_head %}{% endblock %}
</head>
<body class="d-flex flex-column h-100">
    <!-- Header -->
    <header class="main-header shadow-sm bg-white sticky-top">
        <nav class="navbar navbar-expand-lg navbar-light bg-white py-3" role="navigation" aria-label="Main navigation">
            <div class="container">
                <a class="navbar-brand fw-bold text-primary fs-3" href="/" aria-label="PlanetPulse Home">
                    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="PlanetPulse Logo" class="d-inline-block align-text-top" style="height: 60px; width: auto;">
                    <span class="d-none d-md-inline">PlanetPulse</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav" role="menubar">
                    <ul class="navbar-nav me-auto" role="menubar">
                        <li class="nav-item" role="none">
                            <a class="nav-link active" href="/" role="menuitem" aria-current="page"><i class="fas fa-home"></i></a>
                        </li>
                        <li class="nav-item dropdown" role="none">
                            <a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="menuitem" data-bs-toggle="dropdown" aria-expanded="false" title="Categories">
                                <i class="fas fa-th-large"></i>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="categoriesDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='business') }}" role="menuitem"><i class="fas fa-briefcase me-2"></i>Business</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='technology') }}" role="menuitem"><i class="fas fa-flask me-2"></i>Technology</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='sports') }}" role="menuitem"><i class="fas fa-futbol me-2"></i>Sports</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='health') }}" role="menuitem"><i class="fas fa-heartbeat me-2"></i>Health</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='education') }}" role="menuitem"><i class="fas fa-graduation-cap me-2"></i>Education</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='entertainment') }}" role="menuitem"><i class="fas fa-film me-2"></i>Entertainment</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='science') }}" role="menuitem"><i class="fas fa-microscope me-2"></i>Science</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.category', category_name='politics') }}" role="menuitem"><i class="fas fa-landmark me-2"></i>Politics</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown" role="none">
                            <a class="nav-link dropdown-toggle" href="#" id="helpDropdown" role="menuitem" data-bs-toggle="dropdown" aria-expanded="false" title="Help">
                                <i class="fas fa-question-circle"></i>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="helpDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('main.about_news') }}" role="menuitem"><i class="fas fa-info-circle me-2"></i>About News</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.news_guide') }}" role="menuitem"><i class="fas fa-book me-2"></i>News Guide</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.faq') }}" role="menuitem"><i class="fas fa-question me-2"></i>FAQ</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.contact') }}" role="menuitem"><i class="fas fa-envelope me-2"></i>Contact Support</a></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="d-flex align-items-center">
                        <form class="d-flex me-3 search-container" action="{{ url_for('main.search') }}" method="GET" role="search" aria-label="Search news">
                            <input class="form-control me-2" type="search" name="q" placeholder="Search news..." aria-label="Search news" required>
                            <button class="btn btn-outline-primary" type="submit" aria-label="Submit search">
                                <i class="fas fa-search" aria-hidden="true"></i>
                            </button>
                        </form>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('main.settings') }}" title="Settings">
                                <i class="fas fa-cog"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('main.about') }}" title="About Us">
                                <i class="fas fa-info-circle"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" id="darkModeToggle" title="Toggle Dark Mode">
                                <i class="fas fa-moon"></i>
                            </button>
                        </li>
                        <div class="dropdown account-dropdown">
                            <button class="btn btn-outline-primary dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('main.profile') }}" role="menuitem"><i class="fas fa-user-circle me-2"></i>Profile</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.settings') }}" role="menuitem"><i class="fas fa-cog me-2"></i>Settings</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{{ url_for('main.logout') }}" role="menuitem"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breaking News Banner -->
    <div id="breakingNewsBanner" class="breaking-news-banner d-none">
        <div class="container">
            <div class="breaking-news-content">
                <div class="breaking-news-label">
                    <i class="fas fa-bolt"></i>
                    <span>BREAKING</span>
                </div>
                <div class="breaking-news-ticker">
                    <div class="ticker-content"></div>
                </div>
                <button class="btn-close btn-close-white" aria-label="Close breaking news"></button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-shrink-0">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer mt-auto py-4">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="footer-section">
                        <h5 class="footer-title">PlanetPulse</h5>
                        <p class="footer-text">Your trusted source for intelligent news aggregation and updates from around the world.</p>
                        <div class="social-links">
                            <a href="https://www.linkedin.com/in/vedansh-vijayvargia-41a64421b/" target="_blank" class="social-link" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                            <a href="https://github.com/vedanshvijay" target="_blank" class="social-link" title="GitHub"><i class="fab fa-github"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="footer-section">
                        <h5 class="footer-title">Quick Links</h5>
                        <ul class="footer-links">
                            <li><a href="/" class="footer-link">Home</a></li>
                            <li><a href="{{ url_for('main.category', category_name='world') }}" class="footer-link">Global News</a></li>
                            <li><a href="{{ url_for('main.category', category_name='india') }}" class="footer-link">Indian News</a></li>
                            <li><a href="#" class="footer-link" data-bs-toggle="modal" data-bs-target="#privacyPolicyModal">Privacy Policy</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="footer-section">
                        <h5 class="footer-title">Contact Us</h5>
                        <ul class="footer-contact">
                            <li>
                                <a href="mailto:ved02vijay@gmail.com" class="text-decoration-none">
                                    <i class="fas fa-envelope"></i> ved02vijay@gmail.com
                                </a>
                            </li>
                            <li>
                                <a href="tel:+919413846397" class="text-decoration-none">
                                    <i class="fas fa-phone"></i> +91 9413846397
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- About Me Section -->
            <div class="about-me-section">
                <h5>About Me</h5>
                <div class="about-me-content">
                    <p>Hi, I'm Vedansh Vijayvargia, a passionate developer and creator of PlanetPulse. I love building innovative solutions that make a difference in people's lives. With expertise in web development and a keen interest in technology, I strive to create user-friendly applications that provide value to users worldwide.</p>
                </div>
                <div class="about-me-social">
                    <a href="https://www.linkedin.com/in/vedansh-vijayvargia-41a64421b/" target="_blank" title="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="https://github.com/vedanshvijay" target="_blank" title="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                </div>
            </div>
            <div class="footer-bottom text-center mt-4 pt-3">
                <p class="mb-0">&copy; 2025 PlanetPulse. All rights reserved. | Developed by <a href="https://www.linkedin.com/in/vedansh-vijayvargia-41a64421b/" target="_blank" class="text-decoration-none">Vedansh Vijayvargia</a></p>
            </div>
        </div>
    </footer>

    <!-- Privacy Policy Modal -->
    <div class="modal fade" id="privacyPolicyModal" tabindex="-1" aria-labelledby="privacyPolicyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="privacyPolicyModalLabel">
                        <i class="fas fa-shield-alt me-2"></i>Privacy Policy
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="privacy-content">
                        <section class="mb-4">
                            <h6 class="text-primary mb-3">1. Information We Collect</h6>
                            <p>We collect information that you provide directly to us, including:</p>
                            <ul>
                                <li>Email address for newsletter subscriptions</li>
                                <li>News preferences and reading history</li>
                                <li>Device and browser information</li>
                                <li>IP address and location data</li>
                            </ul>
                        </section>

                        <section class="mb-4">
                            <h6 class="text-primary mb-3">2. How We Use Your Information</h6>
                            <p>We use the collected information to:</p>
                            <ul>
                                <li>Provide and improve our news services</li>
                                <li>Send you relevant news updates and newsletters</li>
                                <li>Personalize your news feed</li>
                                <li>Analyze and improve our website performance</li>
                            </ul>
                        </section>

                        <section class="mb-4">
                            <h6 class="text-primary mb-3">3. Data Protection</h6>
                            <p>We implement appropriate security measures to protect your personal information:</p>
                            <ul>
                                <li>Encryption of data in transit</li>
                                <li>Secure storage of user data</li>
                                <li>Regular security audits</li>
                                <li>Limited access to personal information</li>
                            </ul>
                        </section>

                        <section class="mb-4">
                            <h6 class="text-primary mb-3">4. Third-Party Services</h6>
                            <p>We may use third-party services that collect, monitor, and analyze information, including:</p>
                            <ul>
                                <li>Analytics services (Google Analytics)</li>
                                <li>News content providers</li>
                                <li>Advertisement networks</li>
                            </ul>
                        </section>

                        <section class="mb-4">
                            <h6 class="text-primary mb-3">5. Your Rights</h6>
                            <p>You have the right to:</p>
                            <ul>
                                <li>Access your personal information</li>
                                <li>Correct inaccurate data</li>
                                <li>Request deletion of your data</li>
                                <li>Opt-out of marketing communications</li>
                            </ul>
                        </section>

                        <section class="mb-4">
                            <h6 class="text-primary mb-3">6. Cookies</h6>
                            <p>We use cookies to:</p>
                            <ul>
                                <li>Remember your preferences</li>
                                <li>Improve user experience</li>
                                <li>Analyze website traffic</li>
                                <li>Provide personalized content</li>
                            </ul>
                        </section>

                        <section class="mb-4">
                            <h6 class="text-primary mb-3">7. Changes to Privacy Policy</h6>
                            <p>We may update this privacy policy from time to time. We will notify you of any changes by posting the new policy on this page.</p>
                        </section>

                        <section>
                            <h6 class="text-primary mb-3">8. Contact Us</h6>
                            <p>If you have any questions about this Privacy Policy, please contact us at:</p>
                            <p><i class="fas fa-envelope me-2"></i>ved02vijay@gmail.com</p>
                        </section>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="acceptPrivacyPolicy">
                        <i class="fas fa-check me-2"></i>I Accept
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Modal -->
    <div class="modal fade" id="faqModal" tabindex="-1" aria-labelledby="faqModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="faqModalLabel">
                        <i class="fas fa-question-circle me-2"></i>Frequently Asked Questions
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="faq-section">
                        <div class="faq-item">
                            <div class="faq-question">What is PlanetPulse?</div>
                            <div class="faq-answer">PlanetPulse is an intelligent news aggregation platform that brings you the latest news from around the world, curated and personalized to your interests.</div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">How do I customize my news feed?</div>
                            <div class="faq-answer">You can customize your news feed by clicking on the settings icon and selecting your preferred categories, sources, and topics. You can also drag and drop the navigation items to reorder them according to your preference.</div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">Is PlanetPulse free to use?</div>
                            <div class="faq-answer">Yes, PlanetPulse is completely free to use. We provide access to a wide range of news sources and features without any subscription fees.</div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">How often is the news updated?</div>
                            <div class="faq-answer">Our news feed is updated in real-time, ensuring you get the latest news as it happens. We aggregate content from multiple reliable sources to provide comprehensive coverage.</div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">Can I save articles for later reading?</div>
                            <div class="faq-answer">Yes, you can save articles by clicking the bookmark icon on any article. Your saved articles can be accessed from your profile section.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- News Guide Modal -->
    <div class="modal fade" id="guideModal" tabindex="-1" aria-labelledby="guideModalLabel" aria-hidden="true" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="guideModalLabel">
                        <i class="fas fa-book me-2" aria-hidden="true"></i>News Guide
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close guide"></button>
                </div>
                <div class="modal-body" role="document">
                    <div class="guide-section">
                        <div class="guide-step">
                            <div class="guide-step-number">1</div>
                            <div class="guide-step-content">
                                <div class="guide-step-title">Getting Started</div>
                                <div class="guide-step-description">Welcome to PlanetPulse! Start by exploring the main categories in the navigation bar. You can access global news, Indian news, and various other categories.</div>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="guide-step-number">2</div>
                            <div class="guide-step-content">
                                <div class="guide-step-title">Customizing Your Experience</div>
                                <div class="guide-step-description">Click the settings icon to personalize your news feed. You can select your preferred categories, sources, and set up notifications for breaking news.</div>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="guide-step-number">3</div>
                            <div class="guide-step-content">
                                <div class="guide-step-title">Using the Search Feature</div>
                                <div class="guide-step-description">Use the search bar to find specific news articles or topics. The search is powered by advanced algorithms to provide relevant results.</div>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="guide-step-number">4</div>
                            <div class="guide-step-content">
                                <div class="guide-step-title">Saving and Sharing</div>
                                <div class="guide-step-description">Bookmark interesting articles for later reading and share them with friends using the share button. You can also create reading lists for different topics.</div>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="guide-step-number">5</div>
                            <div class="guide-step-content">
                                <div class="guide-step-title">Staying Updated</div>
                                <div class="guide-step-description">Enable notifications to stay informed about breaking news and updates in your areas of interest. You can customize notification preferences in settings.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Guide Bubbles -->
    <div id="userGuide" class="user-guide">
        <div class="guide-bubble" data-step="1">
            <div class="bubble-content">
                <h5>Welcome to PlanetPulse! 👋</h5>
                <p>Let's take a quick tour of our features.</p>
                <div class="bubble-actions">
                    <button class="btn btn-sm btn-primary next-step">Next</button>
                    <button class="btn btn-sm btn-outline-secondary skip-guide">Skip Tour</button>
                </div>
            </div>
        </div>
        <div class="guide-bubble" data-step="2">
            <div class="bubble-content">
                <h5>News Categories 📰</h5>
                <p>Browse news by different categories like Business, Technology, Sports, and more.</p>
                <div class="bubble-actions">
                    <button class="btn btn-sm btn-primary next-step">Next</button>
                    <button class="btn btn-sm btn-outline-secondary skip-guide">Skip Tour</button>
                </div>
            </div>
        </div>
        <div class="guide-bubble" data-step="3">
            <div class="bubble-content">
                <h5>Search & Filter 🔍</h5>
                <p>Use the search bar to find specific news articles or topics.</p>
                <div class="bubble-actions">
                    <button class="btn btn-sm btn-primary next-step">Next</button>
                    <button class="btn btn-sm btn-outline-secondary skip-guide">Skip Tour</button>
                </div>
            </div>
        </div>
        <div class="guide-bubble" data-step="4">
            <div class="bubble-content">
                <h5>Dark Mode 🌙</h5>
                <p>Toggle between light and dark themes for comfortable reading.</p>
                <div class="bubble-actions">
                    <button class="btn btn-sm btn-primary next-step">Next</button>
                    <button class="btn btn-sm btn-outline-secondary skip-guide">Skip Tour</button>
                </div>
            </div>
        </div>
        <div class="guide-bubble" data-step="5">
            <div class="bubble-content">
                <h5>You're All Set! 🎉</h5>
                <p>Start exploring the latest news from around the world.</p>
                <div class="bubble-actions">
                    <button class="btn btn-sm btn-primary finish-guide">Finish</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Theme JS -->
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <!-- Custom Dropdown JS -->
    <!-- <script src="{{ url_for('static', filename='js/custom-dropdown.js') }}"></script> -->
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_scripts %}{% endblock %}
    {% block extra_js %}{% endblock %}

    <!-- Add this before the closing body tag -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userGuide = document.getElementById('userGuide');
            const bubbles = document.querySelectorAll('.guide-bubble');
            let currentStep = 1;

            // Show first bubble on page load
            showBubble(currentStep);

            // Next button click handler
            document.querySelectorAll('.next-step').forEach(button => {
                button.addEventListener('click', () => {
                    currentStep++;
                    if (currentStep <= bubbles.length) {
                        showBubble(currentStep);
                    }
                });
            });

            // Skip button click handler
            document.querySelectorAll('.skip-guide').forEach(button => {
                button.addEventListener('click', () => {
                    hideGuide();
                });
            });

            // Finish button click handler
            document.querySelector('.finish-guide').addEventListener('click', () => {
                hideGuide();
            });

            function showBubble(step) {
                bubbles.forEach(bubble => {
                    bubble.style.display = 'none';
                });
                document.querySelector(`.guide-bubble[data-step="${step}"]`).style.display = 'block';
            }

            function hideGuide() {
                userGuide.style.display = 'none';
                // Save to localStorage that user has seen the guide
                localStorage.setItem('guideShown', 'true');
            }

            // Check if guide has been shown before
            if (localStorage.getItem('guideShown') === 'true') {
                hideGuide();
            }
        });
    </script>

    <!-- Copyright Notice -->
    <div class="copyright-notice text-center py-2" style="position: fixed; bottom: 0; width: 100%; background: rgba(0, 0, 0, 0.8); color: white; z-index: 1000;">
        <small>&copy; 2025 PlanetPulse. All rights reserved. | Developed by <a href="https://www.linkedin.com/in/vedansh-vijayvargia-41a64421b/" target="_blank" style="color: #4dabf7; text-decoration: none;">Vedansh Vijayvargia</a></small>
    </div>

    <!-- Breaking News Banner Styles -->
    <style>
    .breaking-news-banner {
        background: linear-gradient(90deg, #dc3545, #ff4d5b);
        color: white;
        padding: 0.75rem 0;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1030;  /* Above navbar */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        animation: slideDown 0.5s ease-out;
    }

    .breaking-news-content {
        display: flex;
        align-items: center;
        gap: 1rem;
        position: relative;
    }

    .breaking-news-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: rgba(0, 0, 0, 0.2);
        padding: 0.5rem 1rem;
        border-radius: 0.25rem;
        font-weight: bold;
        white-space: nowrap;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .breaking-news-label i {
        animation: pulse 1s infinite;
    }

    .breaking-news-ticker {
        flex: 1;
        overflow: hidden;
        position: relative;
        margin: 0 1rem;
    }

    .ticker-content {
        display: inline-block;
        white-space: nowrap;
        animation: ticker 30s linear infinite;
    }

    .ticker-content a {
        color: white;
        text-decoration: none;
        margin: 0 1rem;
        transition: opacity 0.3s ease;
    }

    .ticker-content a:hover {
        opacity: 0.8;
    }

    .btn-close {
        opacity: 0.8;
        transition: opacity 0.3s ease;
    }

    .btn-close:hover {
        opacity: 1;
    }

    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
    }

    @keyframes ticker {
        0% { transform: translateX(100%); }
        100% { transform: translateX(-100%); }
    }

    @keyframes slideDown {
        from { transform: translateY(-100%); }
        to { transform: translateY(0); }
    }

    /* Dark mode adjustments */
    [data-bs-theme="dark"] .breaking-news-banner {
        background: linear-gradient(90deg, #dc3545, #ff4d5b);
    }

    [data-bs-theme="dark"] .breaking-news-label {
        background: rgba(0, 0, 0, 0.3);
    }

    /* Adjust main content when breaking news is visible */
    body:has(.breaking-news-banner:not(.d-none)) main {
        margin-top: 3.5rem;
    }
    </style>

    <!-- Breaking News Banner Script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Breaking News Banner
        const breakingNewsBanner = document.getElementById('breakingNewsBanner');
        const tickerContent = document.querySelector('.ticker-content');
        const closeButton = breakingNewsBanner.querySelector('.btn-close');

        function updateBreakingNews() {
            fetch('/api/news/breaking')
                .then(response => response.json())
                .then(data => {
                    if (data.articles && data.articles.length > 0) {
                        const breakingNews = data.articles
                            .map(article => `<a href="${article.url}" target="_blank" class="text-white text-decoration-none">${article.title}</a>`)
                            .join(' • ');
                        
                        tickerContent.innerHTML = breakingNews;
                        breakingNewsBanner.classList.remove('d-none');
                        
                        // Add margin to main content
                        document.querySelector('main').style.marginTop = '3.5rem';
                    } else {
                        breakingNewsBanner.classList.add('d-none');
                        // Remove margin from main content
                        document.querySelector('main').style.marginTop = '0';
                    }
                })
                .catch(error => {
                    console.error('Error fetching breaking news:', error);
                    breakingNewsBanner.classList.add('d-none');
                    // Remove margin from main content
                    document.querySelector('main').style.marginTop = '0';
                });
        }

        // Update breaking news every 5 minutes
        updateBreakingNews();
        setInterval(updateBreakingNews, 300000);

        // Close button functionality
        closeButton.addEventListener('click', function() {
            breakingNewsBanner.classList.add('d-none');
            // Remove margin from main content
            document.querySelector('main').style.marginTop = '0';
        });
    });
    </script>
</body>
</html> 